/* ---------- Theme Variables ---------- */
:root {
    --bg: #f8fafc;
    --panel: #ffffff;
    --text: #0f172a;
    --muted: #64748b;
    --border: #e2e8f0;
    --brand1: #0ea5e9;
    --brand1-strong: #0284c7;
    --brand2: #6366f1;
    --accent: #1f2937;
    --ring: rgba(14,165,233,.25);
  }
  
  :root.dark {
    --bg: #0b1220;
    --panel: #0f1629;
    --text: #e5e7eb;
    --muted: #94a3b8;
    --border: #1f2937;
    --brand1: #22d3ee;
    --brand1-strong: #06b6d4;
    --brand2: #a78bfa;
    --accent: #cbd5e1;
    --ring: rgba(99,102,241,.25);
  }
  
  /* ---------- Base ---------- */
  * { box-sizing: border-box; }
  html, body, #root { height: 100%; margin: 0; }
  body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background: var(--bg); color: var(--text); }
  
  /* ---------- Layout ---------- */
  .app-shell { display: grid; grid-template-columns: 260px 1fr; min-height: 100vh; }
  @media (max-width: 900px) { .app-shell { grid-template-columns: 1fr; } }
  
  .sidebar {
    background: linear-gradient(180deg, #0b1220 0%, #0b1220 60%, #0b1220 100%);
    color: #e5e7eb; padding: 16px; border-right: 1px solid var(--border);
    position: sticky; top: 0; height: 100vh; overflow-y: auto;
  }
  :root.dark .sidebar { background: linear-gradient(180deg, #0b1220, #0b1220); }
  @media (max-width: 900px) { .sidebar { height: auto; position: static; } }
  
  .brand { display: flex; align-items: center; gap: 12px; margin-bottom: 18px; }
  .brand-logo { width: 36px; height: 36px; border-radius: 10px; background: linear-gradient(135deg, var(--brand1), var(--brand2)); }
  .brand-title { font-weight: 800; letter-spacing: .2px; }
  
  .nav { display: grid; gap: 8px; margin-top: 12px; }
  .nav button {
    all: unset; cursor: pointer; padding: 10px 12px; border-radius: 12px;
    color: #cbd5e1; border: 1px solid transparent;
  }
  .nav button:hover { background: #111827; color: #fff; }
  .nav button.active { background: #1f2937; color: #fff; border-color: #334155; }
  
  .theme-switch { margin-top: 12px; display: flex; gap: 8px; align-items: center; color: #cbd5e1; }
  .theme-switch button { all: unset; cursor: pointer; padding: 6px 10px; border-radius: 10px; background: #111827; color: #fff; }
  
  .main { padding: 20px; }
  
  .header {
    background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 14px 16px;
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
  }
  
  /* ---------- KPIs ---------- */
  .kpis { display: grid; grid-template-columns: repeat(4,1fr); gap: 10px; margin-top: 12px; }
  @media (max-width: 1100px) { .kpis { grid-template-columns: repeat(2,1fr); } }
  @media (max-width: 560px) { .kpis { grid-template-columns: 1fr; } }
  .kpi { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 12px; }
  .kpi h4 { margin: 0 0 6px 0; color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: .6px; }
  .kpi .v { font-weight: 800; font-size: 20px; color: var(--text); }
  
  /* ---------- Sections / Cards ---------- */
  .section { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 16px; margin-top: 14px; }
  .section-title { display: flex; align-items: center; gap: 8px; margin: 0 0 10px 0; }
  .badge { background: rgba(99,102,241,.12); color: var(--brand2); font-weight: 700; font-size: 12px; padding: 4px 10px; border-radius: 999px; }
  
  .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; margin-bottom: 10px; }
  .input, select, button, .file, .textarea {
    border: 1px solid var(--border); background: var(--panel); color: var(--text);
    padding: 10px 12px; border-radius: 12px;
  }
  .textarea { width: 100%; min-height: 44px; resize: vertical; }
  button { cursor: pointer; font-weight: 700; }
  button.primary { background: var(--brand1); color: #fff; border-color: var(--brand1-strong); }
  button.secondary { background: var(--panel); color: var(--text); }
  button.danger { background: #ef4444; color: #fff; border-color: #dc2626; }
  .helper { color: var(--muted); font-size: 12px; }
  
  /* ---------- Map / List ---------- */
  .map-wrap { border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
  .map { height: 60vh; }
  
  .list { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; }
  @media (max-width: 1100px){ .list { grid-template-columns: repeat(2,1fr); } }
  @media (max-width: 640px){ .list { grid-template-columns: 1fr; } }
  .card { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 12px; display: grid; gap: 8px; }
  .card .meta { font-size: 12px; color: var(--muted); display: flex; gap: 10px; flex-wrap: wrap; }
  .card img { max-width: 100%; border-radius: 10px; border: 1px solid var(--border); }
  
  /* ---------- Camera modal ---------- */
  .modal {
    position: fixed; inset: 0; background: rgba(15,23,42,.55);
    display: flex; align-items: center; justify-content: center; padding: 20px; z-index: 50;
  }
  .modal-card {
    background: #0b1220; color: #e5e7eb; border: 1px solid #334155; border-radius: 14px;
    width: min(720px, 100%); padding: 12px; display: grid; gap: 10px;
  }
  .modal-actions { display: flex; gap: 8px; justify-content: space-between; align-items: center; }
  .video-wrap { background: #000; border-radius: 10px; overflow: hidden; border: 1px solid #334155; }
  .preview { max-width: 100%; border-radius: 10px; border: 1px solid #334155; }
  
  /* ---------- Pulse highlight for new marker ---------- */
  .pulse {
    width: 12px; height: 12px; border-radius: 999px; background: var(--brand1); box-shadow: 0 0 0 0 var(--ring);
    animation: pulse 1.5s infinite;
  }
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 var(--ring); }
    70% { box-shadow: 0 0 0 14px rgba(0,0,0,0); }
    100% { box-shadow: 0 0 0 0 rgba(0,0,0,0); }
  }
  